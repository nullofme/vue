
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <link rel="stylesheet" href="../../node_modules/bootstrap/dist/css/bootstrap.css">
</head>
<body>
<div id="app">
   <!--bootstrap 栅格化布局  默认12列(有些框架可能是24列)-->
    <!--常见的样式 基本样式+增强样式-->
    <div class="container">
        <!--每一行又会有12列-->
        <div class="row">

            <table class="table table-hover table-bordered">
                <caption class="h2 text-primary text-center">购物车</caption>
                <tr>
                    <th>全选<input type="checkbox"></th>
                    <td>商品</td>
                    <td>单价</td>
                    <td>数量</td>
                    <td>小计</td>
                    <td>操作</td>
                </tr>
                <tr v-for="(product,index) in products">
                    <th><input type="checkbox" v-model="product.selected"></th>
                    <td>
                        <img style="width: 100px" v-bind:src="product.img">
                        <span>{{product.title}}</span>
                    </td>
                    <td>{{product.price}}</td>
                    <td><input type="number" v-model.number="product.count"></td>
                    <!--只能输入数字，并且是number类型  v-model.number.lazy当输入框失去焦点时更新数据-->

                    <!--过滤器，原数据不变的情况下，只改变显示的效果-->
                    <td>{{product.price*product.count| toFixed(2)}} </td>
                    <td><button class="btn btn-danger" @click="remove(product)">X</button></td>
                </tr>
            </table>
        </div>
    </div>

</div>
<script src="../../node_modules/vue/dist/vue.js"></script>
<!--基于promise-->
<script src="../../node_modules/axios/dist/axios.js"></script>
<script>
    let vm=new Vue({
        el: '#app',
        //专门用来发送ajax的方法
        created() {//在数据初始化后调用，this指向的也是vm的实例
            //promise解决回调问题
            this.getData();
        },
        filters:{//好多的自定义过滤器
            toFixed(input,n){//input代表管道前的参数，n代表管道后的参数
               return '￥'+input.toFixed(n)
            }
        },
        methods: {
            getData() {//初始化方法
                axios.get('cart.json').then(res => {
                    this.products = res.data;
                }, err => {
                    console.log(err);
                })
            },
            remove(obj){//当前点击的那一项
                this.products=this.products.filter(item=>item!==obj);
            }
        },
        data: {
            products: []
        }
    })
</script>
</body>
</html>